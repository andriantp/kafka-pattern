# Nama file: Makefile
COMPOSE=docker compose

# Kafka
kafka-up:
	@echo "ðŸš€ Starting Kafka (broker + connect + akhq)..."
	rm -rf kafka kafka-connect
	mkdir -p kafka 
	chmod 777 kafka 
	$(COMPOSE) -f kafka.docker-compose.yml up --force-recreate -d --build 

kafka-down:
	@echo "ðŸ›‘ Stopping Kafka..."
	$(COMPOSE) -f kafka.docker-compose.yml down

kafka-ps:
	@echo "ðŸ“‹ Kafka containers status:"
	$(COMPOSE) -f kafka.docker-compose.yml ps -a

# Postgres
postgres-up:
	@echo "ðŸš€ Starting Postgres..."
	rm -rf pgdata
	mkdir -p pgdata
	chown -R 999:999 pgdata
	$(COMPOSE) -f postgres.docker-compose.yml up --force-recreate -d --build 

postgres-down:
	@echo "ðŸ›‘ Stopping Postgres..."
	$(COMPOSE) -f postgres.docker-compose.yml down

postgres-ps:
	@echo "ðŸ“‹ Postgres container status:"
	$(COMPOSE) -f postgres.docker-compose.yml ps -a

# ElasticSearch + Kibana
elastic-up:
	@echo "ðŸš€ Starting ElasticSearch + Kibana..."
	rm -rf esdata
	mkdir -p esdata
	chmod 777 esdata
	$(COMPOSE) -f elastic.docker-compose.yml up --force-recreate -d --build 

elastic-down:
	@echo "ðŸ›‘ Stopping ElasticSearch + Kibana..."
	$(COMPOSE) -f elastic.docker-compose.yml down

elastic-ps:
	@echo "ðŸ“‹ ElasticSearch + Kibana containers status:"
	$(COMPOSE) -f elastic.docker-compose.yml ps -a
